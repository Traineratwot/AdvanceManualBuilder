{"version":3,"names":[],"mappings":"","sources":["assets/projects/AdvanceManualBuilder/old/engine/workstation/js/libs/SCM.js"],"sourcesContent":["/*jshint esversion: 6 */\r\n// [\r\n// \t{item:'itemName',title:'title',function:function(){}}\r\n// ]\r\nclass SCM {\r\n\tconstructor(list = [], position = null) {\r\n\t\tvar self = this;\r\n\t\tif (position) {\r\n\t\t\tthis.position = position;\r\n\t\t}\r\n\t\tthis.list = list;\r\n\t\tthis.menu;\r\n\t\tthis.ul;\r\n\t\tthis.li = {};\r\n\t\tthis.status = 0;\r\n\t\tif (this.list) {\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tthis.events = {};\r\n\t\t$(document).on('mousemove touchmove', function (event) {\r\n\t\t\tself.Mouse(event);\r\n\t\t});\r\n\t}\r\n\tMouse(e) {\r\n\t\tthis.event = e;\r\n\t\tif (e.touches) {\r\n\t\t\tthis.event.clientX = event.touches[0].clientX;\r\n\t\t\tthis.event.clientY = event.touches[0].clientY;\r\n\t\t}\r\n\t}\r\n\taddItem(item = {}) {\r\n\t\tthis.list.push(item);\r\n\t\tif (this.list) {\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\tsetList(list = []) {\r\n\t\tthis.list = list;\r\n\t\tif (this.list) {\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\tinit() {\r\n\t\tvar self = this;\r\n\t\tthis.menu = $('<div class=\"SCM\">');\r\n\t\tthis.menu.css({\r\n\t\t\tdisplay: 'none',\r\n\t\t\tposition: 'absolute',\r\n\t\t})\r\n\t\tthis.ul = $('<ul>').appendTo(this.menu);\r\n\t\tfor (const key in this.list) {\r\n\t\t\tif (this.list.hasOwnProperty(key)) {\r\n\t\t\t\tconst e = this.list[key];\r\n\t\t\t\tvar li = $('<li class=\"SCM\">');\r\n\t\t\t\tli.html(e.item);\r\n\t\t\t\tli.on('click touchend', function (params) {\r\n\t\t\t\t\tself.list[key].function(e, self, self.AnyValue);\r\n\t\t\t\t\tself.hide()\r\n\t\t\t\t});\r\n\t\t\t\tthis.li[key] = li;\r\n\t\t\t\tli.appendTo(this.ul);\r\n\t\t\t}\r\n\t\t}\r\n\t\t$('body').append(this.menu);\r\n\t\treturn this;\r\n\t}\r\n\tposition(self, event, AnyValue) {\r\n\t\tthis.menu.offset({\r\n\t\t\ttop: this.event.pageY,\r\n\t\t\tleft: this.event.pageX\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\tshow(event, AnyValue = {}) {\r\n\t\tif (this.status == 1) {\r\n\t\t\tif (AnyValue != this.AnyValue) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.status = 1;\r\n\t\tvar self = this;\r\n\t\tif (!this.menu) {\r\n\t\t\tconsole.warn('меню не обнаружено попробуйте добавить саписок либо вызвать функуцию init()');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!$.isEmptyObject(event)) {\r\n\t\t\tthis.event = event;\r\n\t\t}\r\n\t\tthis.AnyValue = AnyValue;\r\n\t\tthis.position(this, event, AnyValue);\r\n\t\tthis.menu.fadeIn(this);\r\n\t\t// добовляем событие на скрытие меню при клике в другую область\r\n\t\tsetTimeout(() => {\r\n\t\t\t$('body').on('click touchend', function (event) {\r\n\t\t\t\tself.events.body = event;\r\n\t\t\t\tself.hide();\r\n\t\t\t});\r\n\t\t}, 500);\r\n\t\treturn this;\r\n\t}\r\n\thide(event) {\r\n\t\tvar self = this;\r\n\t\tif (this.status == 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.status = 0;\r\n\t\tif (!this.menu) {\r\n\t\t\tconsole.warn('меню не обнаружено попробуйте добавить саписок либо вызвать функуцию init()');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t$('body').unbind(self.events.body);\r\n\t\tthis.menu.fadeOut();\r\n\t\tthis.menu.offset({\r\n\t\t\ttop: -9999,\r\n\t\t\tleft: -9999\r\n\t\t});\r\n\t\tthis.menu.fadeIn(0);\r\n\t\treturn this;\r\n\t}\r\n\tremove() {\r\n\t\tfor (const key in this.li) {\r\n\t\t\tif (this.li.hasOwnProperty(key)) {\r\n\t\t\t\tconst e = this.li[key];\r\n\t\t\t\te.unbind('click');\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.menu.remove();\r\n\t\tthis.menu = null;\r\n\t\tthis.ul = null;\r\n\t\tthis.li = null;\r\n\t}\r\n\r\n}\r\n//# sourceMappingURL=SCM.js.map\r\n"],"file":"SCM.js"}